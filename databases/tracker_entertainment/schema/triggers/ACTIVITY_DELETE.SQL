SET TERM !! ;

CREATE OR ALTER TRIGGER ACTIVITY_DELETE FOR ACTIVITY
ACTIVE BEFORE DELETE POSITION 0
AS
BEGIN
  IF (EXISTS(SELECT 1 FROM DAILYLOG WHERE ACTIVITYID = OLD.ID)) THEN EXCEPTION DATA_LINKED 'This activity has Daily Log entries and cannot be deleted.';
END
!!

SET TERM ; !!