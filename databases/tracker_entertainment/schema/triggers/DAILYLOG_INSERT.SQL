SET TERM !! ;

CREATE OR ALTER TRIGGER DAILYLOG_INSERT FOR DAILYLOG
ACTIVE BEFORE INSERT POSITION 0
AS
BEGIN
  IF (NEW.USERID IS NULL) THEN EXCEPTION FIELD_REQUIRED 'UserId is required.'
  IF (NEW.TITLEID IS NULL) THEN EXCEPTION FIELD_REQUIRED 'TitleId is required.'
  IF (NEW.ACTIVITYDATE IS NULL) THEN EXCEPTION FIELD_REQUIRED 'Activity Date is required.';
  IF (NEW.PROGRESS > 0 AND UOMID IS NULL) THEN EXCEPTION FIELD_REQUIRED 'Unit of Measure is required.'

  IF (NEW.ID IS NULL) THEN NEW.ID = GEN_ID(GEN_DAILYLOG_ID,1);
  IF (NEW.COMMENT IS NULL OR TRIM(NEW.COMMENT) = '') THEN NEW.COMMENT = '';
END
!!

SET TERM ; !!