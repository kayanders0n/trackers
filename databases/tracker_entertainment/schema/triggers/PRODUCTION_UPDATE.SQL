SET TERM !! ;

CREATE OR ALTER TRIGGER PRODUCTION_UPDATE FOR PRODUCTION
ACTIVE BEFORE UPDATE POSITION 0
AS
BEGIN
  IF (NEW.ORDERID IS NULL) THEN NEW.ORDERID = 0;

  IF (NEW.TITLEID IS DISTINCT FROM OLD.TITLEID) THEN EXCEPTION GOT_HERE 'Cannot change TitleId.';
  IF (NEW.ENTITYID IS DISTINCT FROM OLD.ENTITYID) THEN EXCEPTION GOT_HERE 'Cannot change EntityId.';
END
!!

SET TERM ; !!