SET TERM !! ;

CREATE OR ALTER TRIGGER USERLIST_DELETE FOR USERLIST
ACTIVE BEFORE DELETE POSITION 0
AS
BEGIN
  IF (OLD.LISTTYPEID > 1) THEN BEGIN /* Is Default List */
    IF (OLD.OVERRIDE = 0) THEN BEGIN /* Do not allow delete */
      EXCEPTION GOT_HERE 'Cannot delete Default Lists.';
    END ELSE BEGIN                   /* Allow delete if override <> 0 */
      DELETE FROM USERLISTITEMS WHERE USERLISTID = OLD.ID;
    END
  END ELSE BEGIN
    DELETE FROM USERLISTITEMS WHERE USERLISTID = OLD.ID;
  END
END
!!

SET TERM ; !!